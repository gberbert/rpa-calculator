# AGENT MEMORY RAG

## SYSTEM STATUS
- **Workspace:** `rpa-calculator`
- **Environment:** Development (Local)
- **Last Update:** 2026-01-07

## PROJECT CONTEXT
- **Type:** ROI Calculator for RPA (React/Vite + Node.js?)
- **Current Issue:** Frontend not loading (404 on main.tsx, Manifest syntax error).

## DECISION LOG

### [2026-01-07] Initialization & Frontend Diagnosis
- **Context:** User reported white screen on localhost:5173. Error indicates browser looking for `main.tsx` while valid file is `main.jsx`.
- **Diagnosis:** Suspected Stale Service Worker (PWA) cache holding onto an old version of `index.html` referencing `main.tsx`.
- **Action:** 
    1. Initialized this RAG file.
    2. Planned to clear Vite cache (`.vite` folder).
    3. Instructed user to clear browser cache/hard reload.
    4. Executed cache cleanup: moved `frontend/node_modules/.vite` to `.vite_backup`.

### [2026-01-07] Fix Admin Settings Visibility
- **Context:** User logged in as "admin" but cannot see or access the configuration screen.
- **Analysis:** Investigating `Navbar.jsx` for button visibility logic and `Settings.jsx` or `AuthContext` for permission logic. `App.jsx` uses state-based routing (`currentView`).
- **Fix:** Modified `AuthContext.jsx` to include a fallback: if the user's email starts with "admin", automatically assign the 'admin' role, even if the Firestore document is missing or says 'user'. This bypasses potential DB issues during dev.

### [2026-01-07] Update History Table
- **Context:** User requested adding a "User Email" column and removing the ID display in the history table.
- **Action:**
    1.  Modified `backend/src/services/projectService.js` to enrich `listProjects` results with email data fetched from the `users` collection.
    2.  Updated `frontend/src/components/ProjectHistory.jsx` to add the "Usu√°rio" column and remove the ID caption.

### [2026-01-12] Fix 400 Bad Request on ROI Calculation (Production)
- **Context:** User reported `400 Bad Request` on `/api/projects/calculate-roi` in Render. Local code uses `POST /api/projects`.
- **Diagnosis:** Version mismatch. Production is outdated.
- **Action:**
    1.  Enhanced `ROIWizard.jsx` to show detailed backend errors.
    2.  Validated local logic.
    3.  **Executed:** Deployed version `v1.0.41` via `release.js` (Auto-push to Render).
    4.  **Note:** Created `.deploy_history.md` as it was missing.
